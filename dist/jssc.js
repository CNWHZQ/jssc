!function(r,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.JSSC=n():r.JSSC=n()}(window,function(){return d={"./src/jssc.ts":
/*!*********************!*\
  !*** ./src/jssc.ts ***!
  \*********************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError("Generator is already executing.");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nfunction isFunction(s) {\r\n    return s && s.constructor && s.constructor === Function;\r\n}\r\nfunction isArray(s) {\r\n    return s && s.constructor && s.constructor === Array;\r\n}\r\nfunction isString(s) {\r\n    return s && typeof s == "string";\r\n}\r\nvar getProps = function (props, args, context) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            if (!props) {\r\n                return [2 /*return*/, Promise.resolve(args)];\r\n            }\r\n            return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                    if (props != null) {\r\n                        //处理参数 props 属性\r\n                        if (isFunction(props)) {\r\n                            //若props为函数,将实参列表传入props,在props函数中this指向services,this.context指向当前配置，\r\n                            return Promise.resolve(props.apply(context, args))\r\n                                .then(resolve)["catch"](reject);\r\n                        }\r\n                        else if (isArray(props)) {\r\n                            //若props为string[]，将实参列表传入props\r\n                            var rev = {};\r\n                            props.forEach(function (iprop, index) {\r\n                                rev[iprop] = args[index] || null;\r\n                            });\r\n                            return resolve(rev);\r\n                        }\r\n                        else {\r\n                            resolve(args);\r\n                        }\r\n                    }\r\n                    else {\r\n                        resolve(args);\r\n                    }\r\n                })];\r\n        });\r\n    });\r\n};\r\nexports.version = "1.0.0";\r\nvar ServiceCreater = /** @class */ (function () {\r\n    function ServiceCreater(option) {\r\n        this.ajaxOption = {};\r\n        this.ajax = option.ajax;\r\n        Object.assign(this.ajaxOption, option.ajaxOption);\r\n    }\r\n    ServiceCreater.prototype.createServices = function (setting) {\r\n        var rev = {};\r\n        for (var a in setting) {\r\n            rev[a] = this.createService(setting[a]);\r\n        }\r\n        return rev;\r\n    };\r\n    ServiceCreater.prototype.createService = function (option) {\r\n        var opt;\r\n        if (option == null) {\r\n            throw "createService 参数错误";\r\n        }\r\n        else if (isFunction(option)) {\r\n            return function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                return Promise.resolve(option.apply(this, args));\r\n            };\r\n        }\r\n        else if (isString(option)) {\r\n            opt = { url: option };\r\n        }\r\n        else {\r\n            opt = option;\r\n        }\r\n        var salf = this;\r\n        return function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            var rev;\r\n            if (opt.props) {\r\n                rev = getProps(opt.props, args, this).then(function (d) { return ({ data: d }); });\r\n            }\r\n            else {\r\n                var d = void 0;\r\n                if (args.length == 0) {\r\n                    d = {};\r\n                }\r\n                else if (isString(opt.url) && args.length == 1) {\r\n                    d = { data: args[0] };\r\n                }\r\n                else {\r\n                    d = { data: args };\r\n                }\r\n                rev = Promise.resolve(d);\r\n            }\r\n            if (isString(opt.url)) {\r\n                var url_1 = opt.url;\r\n                rev = rev.then(function (postData) { return salf.ajax(url_1, Object.assign({}, salf.ajaxOption, opt.ajax, postData)); });\r\n            }\r\n            if (opt.then) {\r\n                rev = rev.then(opt.then);\r\n            }\r\n            if (opt.catch) {\r\n                rev = rev.catch(opt.catch);\r\n            }\r\n            else {\r\n                rev = rev.catch(function (error) {\r\n                    throw error;\r\n                });\r\n            }\r\n            return rev;\r\n        };\r\n    };\r\n    ServiceCreater.create = function (option) {\r\n        return new ServiceCreater(option);\r\n    };\r\n    ServiceCreater.prototype.setAjaxOption = function (ajaxOption) {\r\n        Object.assign(this.ajaxOption, ajaxOption);\r\n    };\r\n    return ServiceCreater;\r\n}());\r\nexports.ServiceCreater = ServiceCreater;\r\n\n\n//# sourceURL=webpack://JSSC/./src/jssc.ts?')}},e={},f.m=d,f.c=e,f.d=function(r,n,e){f.o(r,n)||Object.defineProperty(r,n,{enumerable:!0,get:e})},f.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},f.t=function(n,r){if(1&r&&(n=f(n)),8&r)return n;if(4&r&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(f.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&r&&"string"!=typeof n)for(var t in n)f.d(e,t,function(r){return n[r]}.bind(null,t));return e},f.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return f.d(n,"a",n),n},f.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},f.p="",f(f.s="./src/jssc.ts");function f(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return d[r].call(n.exports,n,n.exports,f),n.l=!0,n.exports}var d,e});